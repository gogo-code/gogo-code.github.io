(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64bded86"],{"0496":function(e,t,a){var i=a("efe2");e.exports=function(e){return i((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},"053b":function(e,t,a){var i=a("1e2c"),s=a("d910").f,n=Function.prototype,r=n.toString,c=/^\s*function ([^ (]*)/,o="name";i&&!(o in n)&&s(n,o,{configurable:!0,get:function(){try{return r.call(this).match(c)[1]}catch(e){return""}}})},1255:function(e,t,a){"use strict";var i=a("6db5"),s=a.n(i);s.a},1377:function(e,t,a){"use strict";var i=a("fb1b"),s=a.n(i);s.a},"2c69":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"order-confirm"},[a("order-header",{attrs:{title:"订单确认"},scopedSlots:e._u([{key:"tip",fn:function(){return[a("span",[e._v("请认真填写收货地址")])]},proxy:!0}])}),a("div",{staticClass:"wrapper"},[a("div",{staticClass:"container"},[a("div",{staticClass:"order-box"},[a("div",{staticClass:"item-address"},[a("h2",{staticClass:"addr-title"},[e._v("收货地址")]),a("div",{staticClass:"addr-list clearfix"},[e._l(e.list,(function(t,i){return a("div",{key:i,staticClass:"addr-info",class:{checked:i==e.checkIndex},on:{click:function(t){e.checkIndex=i}}},[a("h2",[e._v(e._s(t.receiverName))]),a("div",{staticClass:"phone"},[e._v(e._s(t.receiverMobile))]),a("div",{staticClass:"street"},[e._v(" "+e._s(t.receiverProvince+" "+t.receiverCity+" "+t.receiverDistrict+" "+t.receiverAddress)+" ")]),a("div",{staticClass:"action"},[a("a",{staticClass:"fl",attrs:{href:"javascript:;"},on:{click:function(a){return e.delAddress(t)}}},[a("span",{staticClass:"icon iconfont icon-ashbin"})]),a("a",{staticClass:"fr",attrs:{href:"javascript:;"},on:{click:function(a){return e.editAddressModal(t)}}},[a("span",{staticClass:"icon iconfont icon-edit"})])])])})),a("div",{staticClass:"addr-add",on:{click:e.openAddressModal}},[a("div",{staticClass:"iconfont icon-add"}),a("div",[e._v("添加新地址")])])],2)]),a("div",{staticClass:"item-good"},[a("h2",[e._v("商品")]),a("ul",e._l(e.cartList,(function(t,i){return a("li",{key:i},[a("div",{staticClass:"good-name"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.productMainImage,expression:"item.productMainImage"}],attrs:{alt:""}}),a("span",[e._v(" "+e._s(t.productName+" "+t.productSubtitle)+" ")])]),a("div",{staticClass:"good-price"},[e._v(" "+e._s(t.productPrice)+"元x"+e._s(t.quantity)+" ")]),a("div",{staticClass:"good-total"},[e._v(e._s(t.productTotalPrice)+"元")])])})),0)]),e._m(0),e._m(1),a("div",{staticClass:"detail"},[a("div",{staticClass:"item"},[a("span",{staticClass:"item-name"},[e._v("商品件数：")]),a("span",{staticClass:"item-val"},[e._v(e._s(e.count)+"件")])]),a("div",{staticClass:"item"},[a("span",{staticClass:"item-name"},[e._v("商品总价：")]),a("span",{staticClass:"item-val"},[e._v(e._s(e.cartTotalPrice)+"元")])]),e._m(2),a("div",{staticClass:"item-total"},[a("span",{staticClass:"item-name"},[e._v("应付总额：")]),a("span",{staticClass:"item-val"},[e._v(e._s(e.cartTotalPrice)+"元")])])]),a("div",{staticClass:"btn-group"},[a("a",{staticClass:"btn btn-default btn-large",attrs:{href:"/#/cart"}},[e._v("返回购物车")]),a("a",{staticClass:"btn btn-large",attrs:{href:"javascript:;"},on:{click:e.orderSubmit}},[e._v(" 去结算 ")])])])])]),a("modal",{attrs:{title:e.title,btnType:"1",showModal:e.showModal},on:{cancel:function(t){e.showModal=!1},submit:e.submitAddress},scopedSlots:e._u([{key:"body",fn:function(){return[a("div",{staticClass:"edit-wrap"},[a("div",{staticClass:"item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedItem.receiverName,expression:"checkedItem.receiverName"}],staticClass:"input",attrs:{type:"text",placeholder:"姓名"},domProps:{value:e.checkedItem.receiverName},on:{input:function(t){t.target.composing||e.$set(e.checkedItem,"receiverName",t.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedItem.receiverMobile,expression:"checkedItem.receiverMobile"}],staticClass:"input",attrs:{type:"text",placeholder:"手机号"},domProps:{value:e.checkedItem.receiverMobile},on:{input:function(t){t.target.composing||e.$set(e.checkedItem,"receiverMobile",t.target.value)}}})]),a("div",{staticClass:"item"},[a("choose-city",{ref:"ChooseCity"})],1),a("div",{staticClass:"item"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.checkedItem.receiverAddress,expression:"checkedItem.receiverAddress"}],attrs:{name:"street",placeholder:"详细地址"},domProps:{value:e.checkedItem.receiverAddress},on:{input:function(t){t.target.composing||e.$set(e.checkedItem,"receiverAddress",t.target.value)}}})]),a("div",{staticClass:"item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedItem.receiverZip,expression:"checkedItem.receiverZip"}],staticClass:"input",attrs:{type:"text",placeholder:"邮编"},domProps:{value:e.checkedItem.receiverZip},on:{input:function(t){t.target.composing||e.$set(e.checkedItem,"receiverZip",t.target.value)}}})])])]},proxy:!0}])}),a("modal",{attrs:{title:"删除确认",btnType:"1",showModal:e.showDelModal},on:{cancel:function(t){e.showDelModal=!1},submit:e.submitAddress},scopedSlots:e._u([{key:"body",fn:function(){return[a("p",[e._v("您确认要删除此地址吗？")])]},proxy:!0}])})],1)},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"item-shipping"},[a("h2",[e._v("配送方式")]),a("span",[e._v("包邮")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"item-invoice"},[a("h2",[e._v("发票")]),a("a",{attrs:{href:"javascript:;"}},[e._v("电子发票")]),a("a",{attrs:{href:"javascript:;"}},[e._v("个人")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"item"},[a("span",{staticClass:"item-name"},[e._v("运费：")]),a("span",{staticClass:"item-val"},[e._v("0元")])])}],n=(a("dbb3"),a("2eeb"),a("714b")),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"example"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.prov,expression:"prov"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.prov=t.target.multiple?a:a[0]}}},e._l(e.arr,(function(t,i){return a("option",{key:i,domProps:{value:t.name}},[e._v(e._s(t.name))])})),0),a("select",{directives:[{name:"model",rawName:"v-model",value:e.city,expression:"city"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.city=t.target.multiple?a:a[0]}}},e._l(e.cityArr,(function(t,i){return a("option",{key:i,domProps:{value:t.name}},[e._v(e._s(t.name))])})),0),e.district?a("select",{directives:[{name:"model",rawName:"v-model",value:e.district,expression:"district"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.district=t.target.multiple?a:a[0]}}},e._l(e.districtArr,(function(t,i){return a("option",{key:i,domProps:{value:t.name}},[e._v(e._s(t.name))])})),0):e._e()])},c=[],o=(a("053b"),a("aafd"),[{name:"选择省份",sub:[{name:"请选择"}],type:1},{name:"北京",sub:[{name:"请选择",sub:[]},{name:"北京",sub:[{name:"请选择"},{name:"东城区"},{name:"西城区"},{name:"崇文区"},{name:"宣武区"},{name:"朝阳区"},{name:"海淀区"},{name:"丰台区"},{name:"石景山区"},{name:"房山区"},{name:"通州区"},{name:"顺义区"},{name:"昌平区"},{name:"大兴区"},{name:"怀柔区"},{name:"平谷区"},{name:"门头沟区"},{name:"密云县"},{name:"延庆县"},{name:"其他"}],type:0}],type:1},{name:"湖北",sub:[{name:"请选择",sub:[]},{name:"武汉",sub:[{name:"请选择"},{name:"江岸区"},{name:"武昌区"},{name:"江汉区"},{name:"硚口区"},{name:"汉阳区"},{name:"青山区"},{name:"洪山区"},{name:"东西湖区"},{name:"汉南区"},{name:"蔡甸区"},{name:"江夏区"},{name:"黄陂区"},{name:"新洲区"},{name:"其他"}],type:0},{name:"黄石",sub:[{name:"请选择"},{name:"黄石港区"},{name:"西塞山区"},{name:"下陆区"},{name:"铁山区"},{name:"大冶市"},{name:"阳新县"},{name:"其他"}],type:0},{name:"十堰",sub:[{name:"请选择"},{name:"张湾区"},{name:"茅箭区"},{name:"丹江口市"},{name:"郧县"},{name:"竹山县"},{name:"房县"},{name:"郧西县"},{name:"竹溪县"},{name:"其他"}],type:0},{name:"荆州",sub:[{name:"请选择"},{name:"沙市区"},{name:"荆州区"},{name:"洪湖市"},{name:"石首市"},{name:"松滋市"},{name:"监利县"},{name:"公安县"},{name:"江陵县"},{name:"其他"}],type:0},{name:"宜昌",sub:[{name:"请选择"},{name:"西陵区"},{name:"伍家岗区"},{name:"点军区"},{name:"猇亭区"},{name:"夷陵区"},{name:"宜都市"},{name:"当阳市"},{name:"枝江市"},{name:"秭归县"},{name:"远安县"},{name:"兴山县"},{name:"五峰土家族自治县"},{name:"长阳土家族自治县"},{name:"其他"}],type:0},{name:"襄樊",sub:[{name:"请选择"},{name:"襄城区"},{name:"樊城区"},{name:"襄阳区"},{name:"老河口市"},{name:"枣阳市"},{name:"宜城市"},{name:"南漳县"},{name:"谷城县"},{name:"保康县"},{name:"其他"}],type:0},{name:"鄂州",sub:[{name:"请选择"},{name:"鄂城区"},{name:"华容区"},{name:"梁子湖区"},{name:"其他"}],type:0},{name:"荆门",sub:[{name:"请选择"},{name:"东宝区"},{name:"掇刀区"},{name:"钟祥市"},{name:"京山县"},{name:"沙洋县"},{name:"其他"}],type:0},{name:"孝感",sub:[{name:"请选择"},{name:"孝南区"},{name:"应城市"},{name:"安陆市"},{name:"汉川市"},{name:"云梦县"},{name:"大悟县"},{name:"孝昌县"},{name:"其他"}],type:0},{name:"黄冈",sub:[{name:"请选择"},{name:"黄州区"},{name:"麻城市"},{name:"武穴市"},{name:"红安县"},{name:"罗田县"},{name:"浠水县"},{name:"蕲春县"},{name:"黄梅县"},{name:"英山县"},{name:"团风县"},{name:"其他"}],type:0},{name:"咸宁",sub:[{name:"请选择"},{name:"咸安区"},{name:"赤壁市"},{name:"嘉鱼县"},{name:"通山县"},{name:"崇阳县"},{name:"通城县"},{name:"其他"}],type:0},{name:"随州",sub:[{name:"请选择"},{name:"曾都区"},{name:"广水市"},{name:"其他"}],type:0},{name:"恩施土家族苗族自治州",sub:[{name:"请选择"},{name:"恩施市"},{name:"利川市"},{name:"建始县"},{name:"来凤县"},{name:"巴东县"},{name:"鹤峰县"},{name:"宣恩县"},{name:"咸丰县"},{name:"其他"}],type:0},{name:"仙桃",sub:[],type:0},{name:"天门",sub:[],type:0},{name:"潜江",sub:[],type:0},{name:"神农架林区",sub:[],type:0},{name:"其他"}],type:1}]),m={name:"chooseCity",data:function(){return{arr:o,prov:"北京",city:"北京",district:"东城区",cityArr:[],districtArr:[]}},mounted:function(){this.setdefault()},methods:{updateCity:function(){for(var e in this.arr){var t=this.arr[e];if(t.name==this.prov){this.cityArr=t.sub;break}}this.city=this.cityArr[1].name},updateDistrict:function(){for(var e in this.cityArr){var t=this.cityArr[e];if(t.name==this.city){this.districtArr=t.sub;break}}this.districtArr&&this.districtArr.length>0&&this.districtArr[1].name?this.district=this.districtArr[1].name:this.district=""},setdefault:function(e,t,a){this.prov=e,this.city=t,this.district=a},setstatic_dist:function(){}},beforeMount:function(){this.updateCity(),this.updateDistrict()},watch:{prov:function(){this.updateCity()},city:function(){this.updateDistrict()}}},l=m,d=(a("1377"),a("9ca4")),u=Object(d["a"])(l,r,c,!1,null,null,null),v=u.exports,p=a("c3d4"),h={name:"order-confirm",data:function(){return{title:"",list:[],cartList:[],cartTotalPrice:0,count:0,checkedItem:{},userAction:"",showDelModal:!1,showModal:!1,checkIndex:0}},components:{Modal:n["a"],ChooseCity:v,OrderHeader:p["a"]},mounted:function(){this.getAddressList(),this.getCartList()},methods:{getAddressList:function(){var e=this;this.axios.get("/shippings").then((function(t){e.list=t.list}))},openAddressModal:function(){this.userAction=0,this.checkedItem={},this.title="新增收货地址",this.showModal=!0},editAddressModal:function(e){this.userAction=1,this.checkedItem=e,this.title="编辑收货地址",this.showModal=!0,this.$refs.ChooseCity.setdefault(e.receiverProvince,e.receiverCity,e.receiverDistrict)},delAddress:function(e){this.checkedItem=e,this.userAction=2,this.showDelModal=!0},submitAddress:function(){var e,t,a=this,i=this.checkedItem,s=this.userAction,n={};if(0==s?(e="post",t="/shippings"):1==s?(e="put",t="/shippings/".concat(i.id)):(e="delete",t="/shippings/".concat(i.id)),0==s||1==s){var r=i.receiverName,c=void 0===r?i.receiverName:r,o=i.receiverMobile,m=void 0===o?i.receiverMobile:o,l=i.receiverProvince,d=void 0===l?this.$refs.ChooseCity.prov:l,u=i.receiverCity,v=void 0===u?this.$refs.ChooseCity.city:u,p=i.receiverDistrict,h=void 0===p?this.$refs.ChooseCity.district:p,f=i.receiverAddress,b=void 0===f?i.receiverAddress:f,y=i.receiverZip,_=void 0===y?i.receiverZip:y,C="";if(c?m&&/\d{11}/.test(m)?d?v?b&&h?/\d{6}/.test(_)||(C="请输入六位邮编"):C="请输入收货地址":C="请选择对应的城市":C="请选择省份":C="请输入正确格式的手机号":C="请输入收货人名称",C)return void this.$message.error(C);n={receiverName:c,receiverMobile:m,receiverProvince:d,receiverCity:v,receiverDistrict:h,receiverAddress:b,receiverZip:_}}this.axios[e](t,n).then((function(){a.closeModal(),a.getAddressList(),a.$message.success("操作成功")}))},getCartList:function(){var e=this;this.axios.get("/carts").then((function(t){var a=t.cartProductVoList;e.cartTotalPrice=t.cartTotalPrice,e.cartList=a.filter((function(e){return e.productSelected})),e.cartList.map((function(t){e.count+=t.quantity}))}))},closeModal:function(){this.checkedItem={},this.userAction="",this.showDelModal=!1,this.showModal=!1},orderSubmit:function(){var e=this,t=this.list[this.checkIndex];t?this.axios.post("/orders",{shippingId:t.id}).then((function(t){e.$store.dispatch("saveCartCount",0),e.$router.push({path:"/order/pay",query:{orderNo:t.orderNo}})})):this.$message.error("请选择一个收货地址")}}},f=h,b=(a("1255"),Object(d["a"])(f,i,s,!1,null,null,null));t["default"]=b.exports},"2eeb":function(e,t,a){"use strict";var i=a("1c8b"),s=a("5dfd").map,n=a("1ea7"),r=a("ff9c"),c=n("map"),o=r("map");i({target:"Array",proto:!0,forced:!c||!o},{map:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}})},5197:function(e,t,a){var i=a("2732"),s=/"/g;e.exports=function(e,t,a,n){var r=String(i(e)),c="<"+t;return""!==a&&(c+=" "+a+'="'+String(n).replace(s,"&quot;")+'"'),c+">"+r+"</"+t+">"}},"54a1":function(e,t,a){},"6db5":function(e,t,a){},"714b":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"slide"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showModal,expression:"showModal"}],staticClass:"modal"},[a("div",{staticClass:"mask"}),a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-header"},[a("span",[e._v(e._s(e.title))]),a("a",{staticClass:"icon-close",attrs:{href:"javascript:;"},on:{click:function(t){return e.$emit("cancel")}}})]),a("div",{staticClass:"modal-body"},[e._t("body")],2),a("div",{staticClass:"modal-footer"},[1==e.btnType?a("a",{staticClass:"btn",attrs:{href:"javascript:;"},on:{click:function(t){return e.$emit("submit")}}},[e._v(" "+e._s(e.sureText)+" ")]):2==e.btnType?a("a",{staticClass:"btn",attrs:{href:"javascript:;"},on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.cancelText)+" ")]):3==e.btnType?a("div",{staticClass:"btn-group"},[a("a",{staticClass:"btn",attrs:{href:"javascript:;"},on:{click:function(t){return e.$emit("submit")}}},[e._v(" "+e._s(e.sureText)+" ")]),a("a",{staticClass:"btn btn-default",attrs:{href:"javascript:;"},on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(e.cancelText)+" ")])]):e._e()])])])])},s=[],n={name:"modal",props:{modalType:{type:String,default:"form"},title:{type:String,default:""},btnType:{type:String,default:"3"},sureText:{type:String,default:"确定"},cancelText:{type:String,default:"取消"},showModal:{type:Boolean,default:!0}},data:function(){return{}}},r=n,c=(a("cafc"),a("9ca4")),o=Object(c["a"])(r,i,s,!1,null,"d0621816",null);t["a"]=o.exports},a1e8:function(e,t,a){"use strict";var i=a("f7bc"),s=a.n(i);s.a},aafd:function(e,t,a){"use strict";var i=a("1c8b"),s=a("5197"),n=a("0496");i({target:"String",proto:!0,forced:n("sub")},{sub:function(){return s(this,"sub","","")}})},c3d4:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"order-header"},[a("div",{staticClass:"container clearfix"},[e._m(0),a("div",{staticClass:"title fl"},[a("h2",[e._v(" "+e._s(e.title)+" "),e._t("tip")],2)]),a("div",{staticClass:"username fr"},[a("a",{attrs:{href:"javascript:;"}},[e._v(e._s(e.username))])])])])},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header-logo fl"},[a("a",{attrs:{href:"/#/index"}})])}],n=a("e793"),r=a("9f3a"),c={name:"order-header",props:{title:String},computed:Object(n["a"])({},Object(r["c"])(["username"])),data:function(){return{}}},o=c,m=(a("a1e8"),a("9ca4")),l=Object(m["a"])(o,i,s,!1,null,"4713367c",null);t["a"]=l.exports},cafc:function(e,t,a){"use strict";var i=a("54a1"),s=a.n(i);s.a},f7bc:function(e,t,a){},fb1b:function(e,t,a){}}]);
//# sourceMappingURL=chunk-64bded86.48256025.js.map