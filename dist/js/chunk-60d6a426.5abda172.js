(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60d6a426"],{4461:function(t,a,e){"use strict";var s=e("ebac"),c=e.n(s);c.a},"6ca9":function(t,a,e){},"7cb1":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"cart"},[e("order-header",{attrs:{title:"我的购物车"},scopedSlots:t._u([{key:"tip",fn:function(){return[e("span",[t._v("温馨提示：产品是否购买成功，以最终下单为准哦，请尽快结算")])]},proxy:!0}])}),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"container"},[e("div",{staticClass:"cart-box"},[e("ul",{staticClass:"cart-item-head"},[e("li",{staticClass:"col-1"},[e("span",{staticClass:"checkbox",class:{checked:t.allChecked},on:{click:t.toggleAll}}),t._v(" 全选 ")]),e("li",{staticClass:"col-3"},[t._v("商品名称")]),e("li",{staticClass:"col-1"},[t._v("单价")]),e("li",{staticClass:"col-2"},[t._v("数量")]),e("li",{staticClass:"col-1"},[t._v("小计")]),e("li",{staticClass:"col-1"},[t._v("操作")])]),e("ul",{staticClass:"cart-item-list"},t._l(t.list,(function(a,s){return e("li",{key:s,staticClass:"cart-item"},[e("div",{staticClass:"item-check"},[e("span",{staticClass:"checkbox",class:{checked:a.productSelected},on:{click:function(e){return t.updateCart(a)}}})]),e("div",{staticClass:"item-name"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.productMainImage,expression:"item.productMainImage"}],attrs:{alt:""}}),e("span",[t._v(" "+t._s(a.productName+" , "+a.productSubtitle)+" ")])]),e("div",{staticClass:"item-price"},[t._v(t._s(a.productPrice))]),e("div",{staticClass:"item-num"},[e("div",{staticClass:"num-box"},[e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.updateCart(a,"-")}}},[t._v("-")]),e("span",[t._v(t._s(a.quantity))]),e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.updateCart(a,"+")}}},[t._v("+")])])]),e("div",{staticClass:"item-total"},[t._v(t._s(a.productTotalPrice))]),e("div",{staticClass:"item-del",on:{click:function(e){return t.delProduct(a)}}})])})),0)]),e("div",{staticClass:"order-wrap clearfix"},[e("div",{staticClass:"cart-tip fl"},[e("a",{attrs:{href:"/#/index"}},[t._v("继续购物")]),t._v(" 共 "),e("span",[t._v(t._s(t.list.length))]),t._v(" 件商品，已选择 "),e("span",[t._v(t._s(t.checkedNum))]),t._v(" 项 ")]),e("div",{staticClass:"total fr"},[t._v(" 合计： "),e("span",[t._v(t._s(t.cartTotalPrice))]),t._v(" 元 "),e("a",{staticClass:"btn",attrs:{href:"javascript:;"},on:{click:t.order}},[t._v("去结算")])])])])]),e("service-bar"),e("nav-footer")],1)},c=[],i=(e("84bc"),e("dbb3"),e("c3d4")),r=e("984c"),n=e("f091"),l={data:function(){return{list:[],allChecked:!1,cartTotalPrice:0,checkedNum:0}},components:{OrderHeader:i["a"],ServiceBar:r["a"],NavFooter:n["a"]},mounted:function(){this.getCartList()},methods:{getCartList:function(){var t=this;this.axios.get("/carts").then((function(a){t.renderData(a)}))},renderData:function(t){this.list=t.cartProductVoList,this.allChecked=t.selectedAll,this.cartTotalPrice=t.cartTotalPrice,this.checkedNum=this.list.filter((function(t){return t.productSelected})).length},updateCart:function(t,a){var e=this,s=t.quantity,c=t.productSelected;if("-"==a){if(1==s)return void this.$message.warning("商品至少保留一件!");--s}else if("+"==a){if(s>t.productsStock)return void this.$message.warning("购买数量不能超过库存数量");++s}else c=!t.productSelected;this.axios.put("/carts/".concat(t.productId),{quantity:s,selected:c}).then((function(t){return e.renderData(t)}))},delProduct:function(t){var a=this;this.axios.delete("/carts/".concat(t.productId)).then((function(t){a.$message.success("删除成功"),a.renderData(t)}))},toggleAll:function(){var t=this,a=this.allChecked?"/carts/unSelectAll":"/carts/selectAll";this.axios.put(a).then((function(a){t.renderData(a)}))},order:function(){var t=this.list.every((function(t){return!t.productSelected}));t?this.$message.warning("请选择一件商品"):this.$router.push("/order/confirm")}}},o=l,u=(e("4461"),e("9ca4")),d=Object(u["a"])(o,s,c,!1,null,"7252b60c",null);a["default"]=d.exports},"84bc":function(t,a,e){"use strict";var s=e("1c8b"),c=e("5dfd").every,i=e("d7e1"),r=e("ff9c"),n=i("every"),l=r("every");s({target:"Array",proto:!0,forced:!n||!l},{every:function(t){return c(this,t,arguments.length>1?arguments[1]:void 0)}})},"984c":function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement;t._self._c;return t._m(0)},c=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"service"},[e("div",{staticClass:"container"},[e("ul",[e("li",[e("span",{staticClass:"icon-setting"}),t._v(" 预约维修服务 ")]),e("li",[e("span",{staticClass:"icon-7day"}),t._v(" 7天无理由退货 ")]),e("li",[e("span",{staticClass:"icon-15day"}),t._v(" 15天免费换货 ")]),e("li",{staticClass:"last"},[e("span",{staticClass:"icon-post"}),t._v(" 满150天包邮 ")])])])])}],i={name:"service-bar",data:function(){return{}}},r=i,n=(e("f8b2"),e("9ca4")),l=Object(n["a"])(r,s,c,!1,null,null,null);a["a"]=l.exports},a1e8:function(t,a,e){"use strict";var s=e("f7bc"),c=e.n(s);c.a},c3d4:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"order-header"},[e("div",{staticClass:"container clearfix"},[t._m(0),e("div",{staticClass:"title fl"},[e("h2",[t._v(" "+t._s(t.title)+" "),t._t("tip")],2)]),e("div",{staticClass:"username fr"},[e("a",{attrs:{href:"javascript:;"}},[t._v(t._s(t.username))])])])])},c=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"header-logo fl"},[e("a",{attrs:{href:"/#/index"}})])}],i=e("e793"),r=e("9f3a"),n={name:"order-header",props:{title:String},computed:Object(i["a"])({},Object(r["c"])(["username"])),data:function(){return{}}},l=n,o=(e("a1e8"),e("9ca4")),u=Object(o["a"])(l,s,c,!1,null,"4713367c",null);a["a"]=u.exports},ebac:function(t,a,e){},f7bc:function(t,a,e){},f8b2:function(t,a,e){"use strict";var s=e("6ca9"),c=e.n(s);c.a}}]);
//# sourceMappingURL=chunk-60d6a426.5abda172.js.map